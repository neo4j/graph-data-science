apply plugin: 'com.github.johnrengelman.shadow'

dependencies {
    compile project(':graph-algorithms-core')
    compile 'com.carrotsearch:hppc:0.7.3'
    compile 'org.neo4j:neo4j:3.5.3'
    compile 'org.hdrhistogram:HdrHistogram:2.1.9'
    compile 'io.dropwizard.metrics:metrics-core:4.0.2'
    testCompile 'com.pholser:junit-quickcheck-core:0.8.1'
    testCompile 'com.pholser:junit-quickcheck-generators:0.8.1'
    testCompile 'org.neo4j:neo4j-kernel-api:3.5.3:tests'
    testCompile 'org.neo4j:neo4j-kernel:3.5.3'
    testCompile 'org.neo4j:neo4j-io:3.5.3'
    testCompile 'junit:junit:4.12'
    testCompile 'org.hamcrest:hamcrest-library:1.3'
    testCompile 'org.mockito:mockito-core:2.23.4'
    testCompile 'org.mockito:mockito-inline:2.23.4'
    compileOnly 'org.neo4j:neo4j:3.5.3'
    compileOnly 'net.biville.florent:neo4j-sproc-compiler:1.2.1'
    compileOnly 'org.neo4j:neo4j-slf4j:3.5.3'
}

task javadocJar(type: Jar) {
    classifier = 'javadoc'
    from(javadoc.destinationDir)
}

description = 'Neo4j Graph Algorithms :: Algo'
publishing.publications.maven.artifact(javadocJar)

shadowJar {
    minimize()
    exclude 'META-INF/versions/**/*'
}

tasks.withType(JavaCompile) {
    options.compilerArgs <<
        '-AIgnoreContextWarnings' <<
        '-AGeneratedDocumentationPath=target/generated-documentation' <<
        '-ADocumentation.FieldDelimiter=¦' <<
        '-ADocumentation.ExportedHeaders=qualified name¦description¦type' <<
        '-ADocumentation.QuotedFields=false' <<
        '-ADocumentation.DelimitedFirstField=true' <<
        '-ADocumentation.ExportGrouping=SINGLE'
}
